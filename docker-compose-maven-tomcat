version: '3.7'
services:
  maven:
    container_name: maven-container
    build:
      context: .
      dockerfile: dockerfile-maven
  tomcat:
    image: tomcat:alpine
    container_name: tomcat-conainer
    ports:
      - 8080:8080
    volumes:
      - ${DIRWARFILE}:${WEBAPPS_DIR}
    depends_on:
      - maven
    restart: always
    environment:
      - WEBAPPS_DIR: "${WEBAPPS_DIR}"
      - DIRWARFILE: "${DIRWARFILE}"
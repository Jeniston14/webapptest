version: '3'
services:
  maven:
    container_name: maven-container
    build:
      context: .
      dockerfile: dockerfile-maven
    tomcat:
      image: tomcat:alpine
      ports:
        - 8080:8080
      volumes:
        - ./tmp/$DIRWARFILE:/$CATALINA_HOME/webapps
      depends_on:
        - maven
      restart: always
      environment:
        - ${CATALINA_HOME}:/usr/local/tomcat/webapps
        - ${DIRWARFILE}:/tmp/webapps/target/hello-world-war-1.0.0